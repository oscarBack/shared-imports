<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Order Detail - Merchandise Delivery System</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body class="bg-gray-50">
    <!-- Mobile menu overlay -->
    <div id="mobileMenuOverlay" class="fixed inset-0 z-40 lg:hidden hidden">
        <div class="fixed inset-0 bg-gray-600 bg-opacity-75"></div>
    </div>

    <!-- Sidebar -->
    <div id="sidebar" class="fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform -translate-x-full transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0">
        <div class="flex items-center justify-between h-16 px-4 bg-blue-600">
            <div class="flex items-center">
                <div class="flex-shrink-0">
                    <div class="h-8 w-8 bg-white rounded-lg flex items-center justify-center">
                        <svg class="h-5 w-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10"></path>
                        </svg>
                    </div>
                </div>
                <div class="ml-3">
                    <h1 class="text-white text-lg font-semibold">MDS Admin</h1>
                </div>
            </div>
            <button id="closeSidebar" class="lg:hidden text-white hover:text-gray-200">
                <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>

        <!-- Navigation -->
        <nav class="mt-8">
            <div class="px-4">
                <ul class="space-y-2">
                    <li>
                        <a href="dashboard.html" class="nav-link flex items-center px-4 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-50">
                            <svg class="mr-3 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h2a2 2 0 012 2v2H8V5z"></path>
                            </svg>
                            Dashboard
                        </a>
                    </li>
                    <li>
                        <a href="orders.html" class="nav-link active flex items-center px-4 py-2 text-sm font-medium rounded-md text-blue-600 bg-blue-50">
                            <svg class="mr-3 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            Orders
                        </a>
                    </li>
                    <li>
                        <a href="products.html" class="nav-link flex items-center px-4 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-50">
                            <svg class="mr-3 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10"></path>
                            </svg>
                            Products
                        </a>
                    </li>
                    <li>
                        <a href="clients.html" class="nav-link flex items-center px-4 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-50">
                            <svg class="mr-3 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
                            </svg>
                            Clients
                        </a>
                    </li>
                    <li>
                        <a href="sellers.html" class="nav-link flex items-center px-4 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-50">
                            <svg class="mr-3 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                            Sellers
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>

    <!-- Main content -->
    <div class="lg:pl-64">
        <!-- Top bar -->
        <div class="sticky top-0 z-10 bg-white shadow-sm border-b border-gray-200">
            <div class="flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8">
                <button id="openSidebar" class="lg:hidden text-gray-500 hover:text-gray-700">
                    <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="text-gray-500 hover:text-gray-700">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                    <h1 class="text-xl font-semibold text-gray-900">Order #ORD-001</h1>
                </div>
                <div class="flex space-x-2">
                    <button onclick="toggleEditMode()" id="editButton" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium">
                        Edit Order
                    </button>
                    <button onclick="publishOrder()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium">
                        Publish
                    </button>
                </div>
            </div>
        </div>

        <!-- Page content -->
        <main class="p-4 sm:p-6 lg:p-8">
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Main Order Details -->
                    <div class="lg:col-span-2 space-y-6">
                        <!-- Order Information -->
                        <div class="bg-white shadow rounded-lg">
                            <div class="px-4 py-5 sm:p-6">
                                <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Order Information</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">Order Number</label>
                                        <input type="text" value="#ORD-001" readonly class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">Status</label>
                                        <select id="orderStatus" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500" disabled>
                                            <option value="pending">Pending</option>
                                            <option value="processing">Processing</option>
                                            <option value="shipped" selected>Shipped</option>
                                            <option value="completed">Completed</option>
                                            <option value="cancelled">Cancelled</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">Seller</label>
                                        <select id="orderSeller" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500" disabled>
                                            <option value="fashion-store" selected>Fashion Store Inc.</option>
                                            <option value="tech-gadgets">Tech Gadgets Co.</option>
                                            <option value="sports-gear">Sports Gear Ltd.</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">Casilla (Address Box)</label>
                                        <input type="text" id="orderCasilla" value="BOX-12345" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500" readonly>
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-sm font-medium text-gray-700">Notes</label>
                                        <textarea id="orderNotes" rows="3" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500" readonly placeholder="Order notes...">Express delivery required. Handle with care.</textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Product-Client Items -->
                        <div class="bg-white shadow rounded-lg">
                            <div class="px-4 py-5 sm:p-6">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg leading-6 font-medium text-gray-900">Order Items</h3>
                                    <button onclick="addOrderItem()" id="addItemButton" class="hidden bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-md text-sm font-medium">
                                        Add Item
                                    </button>
                                </div>

                                <div id="orderItems" class="space-y-4">
                                    <!-- Order Item 1 -->
                                    <div class="border border-gray-200 rounded-lg p-4 order-item">
                                        <div class="flex justify-between items-start mb-3">
                                            <h4 class="text-md font-medium text-gray-900">Item #1</h4>
                                            <button onclick="removeOrderItem(this)" class="hidden text-red-600 hover:text-red-800 remove-item-btn">
                                                <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                                </svg>
                                            </button>
                                        </div>

                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700">Product</label>
                                                <select class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 product-select" disabled>
                                                    <option value="t-shirt" selected>Designer T-Shirt</option>
                                                    <option value="jeans">Premium Jeans</option>
                                                    <option value="sneakers">Running Sneakers</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700">Client</label>
                                                <select class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 client-select" disabled>
                                                    <option value="john-doe" selected>John Doe</option>
                                                    <option value="jane-smith">Jane Smith</option>
                                                    <option value="bob-johnson">Bob Johnson</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700">Quantity</label>
                                                <input type="number" value="2" min="1" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 quantity-input" readonly onchange="updateItemTotal(this)">
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700">Unit Cost</label>
                                                <input type="number" value="45.00" step="0.01" min="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 unit-cost-input" readonly onchange="updateItemTotal(this)">
                                            </div>
                                        </div>

                                        <!-- Tags -->
                                        <div class="mb-4">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Tags</label>
                                            <div class="flex flex-wrap gap-2 mb-2 tags-container">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 tag-item">
                                                    Premium
                                                    <button type="button" class="ml-1 h-4 w-4 text-blue-400 hover:text-blue-600 hidden remove-tag-btn" onclick="removeTag(this)">
                                                        <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20">
                                                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                                                        </svg>
                                                    </button>
                                                </span>
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 tag-item">
                                                    Express
                                                    <button type="button" class="ml-1 h-4 w-4 text-green-400 hover:text-green-600 hidden remove-tag-btn" onclick="removeTag(this)">
                                                        <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20">
                                                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                                                        </svg>
                                                    </button>
                                                </span>
                                            </div>
                                            <div class="flex space-x-2 hidden tag-input-container">
                                                <input type="text" placeholder="Enter tag" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 tag-input">
                                                <button type="button" onclick="addTag(this)" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-md text-sm">Add</button>
                                            </div>
                                        </div>

                                        <!-- Item Total -->
                                        <div class="flex justify-end">
                                            <div class="text-right">
                                                <div class="text-sm text-gray-500">Item Total</div>
                                                <div class="text-lg font-semibold text-gray-900 item-total">$90.00</div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Order Item 2 -->
                                    <div class="border border-gray-200 rounded-lg p-4 order-item">
                                        <div class="flex justify-between items-start mb-3">
                                            <h4 class="text-md font-medium text-gray-900">Item #2</h4>
                                            <button onclick="removeOrderItem(this)" class="hidden text-red-600 hover:text-red-800 remove-item-btn">
                                                <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                                </svg>
                                            </button>
                                        </div>

                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700">Product</label>
                                                <select class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 product-select" disabled>
                                                    <option value="t-shirt">Designer T-Shirt</option>
                                                    <option value="jeans" selected>Premium Jeans</option>
                                                    <option value="sneakers">Running Sneakers</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700">Client</label>
                                                <select class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 client-select" disabled>
                                                    <option value="john-doe" selected>John Doe</option>
                                                    <option value="jane-smith">Jane Smith</option>
                                                    <option value="bob-johnson">Bob Johnson</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700">Quantity</label>
                                                <input type="number" value="1" min="1" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 quantity-input" readonly onchange="updateItemTotal(this)">
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700">Unit Cost</label>
                                                <input type="number" value="85.00" step="0.01" min="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 unit-cost-input" readonly onchange="updateItemTotal(this)">
                                            </div>
                                        </div>

                                        <!-- Tags -->
                                        <div class="mb-4">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Tags</label>
                                            <div class="flex flex-wrap gap-2 mb-2 tags-container">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 tag-item">
                                                    Designer
                                                    <button type="button" class="ml-1 h-4 w-4 text-purple-400 hover:text-purple-600 hidden remove-tag-btn" onclick="removeTag(this)">
                                                        <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20">
                                                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                                                        </svg>
                                                    </button>
                                                </span>
                                            </div>
                                            <div class="flex space-x-2 hidden tag-input-container">
                                                <input type="text" placeholder="Enter tag" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 tag-input">
                                                <button type="button" onclick="addTag(this)" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-md text-sm">Add</button>
                                            </div>
                                        </div>

                                        <!-- Item Total -->
                                        <div class="flex justify-end">
                                            <div class="text-right">
                                                <div class="text-sm text-gray-500">Item Total</div>
                                                <div class="text-lg font-semibold text-gray-900 item-total">$85.00</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Order Summary -->
                    <div class="lg:col-span-1">
                        <div class="bg-white shadow rounded-lg sticky top-24">
                            <div class="px-4 py-5 sm:p-6">
                                <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Order Summary</h3>
                                
                                <!-- Cost Breakdown -->
                                <div class="space-y-3">
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">Subtotal</span>
                                        <span class="text-sm font-medium" id="subtotalAmount">$175.00</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">Shipping</span>
                                        <input type="number" value="25.00" step="0.01" min="0" id="shippingCost" class="text-sm text-right border-0 bg-transparent p-0 w-20 focus:outline-none focus:ring-0" readonly onchange="updateOrderTotal()">
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">Tax</span>
                                        <input type="number" value="15.00" step="0.01" min="0" id="taxCost" class="text-sm text-right border-0 bg-transparent p-0 w-20 focus:outline-none focus:ring-0" readonly onchange="updateOrderTotal()">
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">Other Fees</span>
                                        <input type="number" value="5.00" step="0.01" min="0" id="otherFees" class="text-sm text-right border-0 bg-transparent p-0 w-20 focus:outline-none focus:ring-0" readonly onchange="updateOrderTotal()">
                                    </div>
                                    <hr>
                                    <div class="flex justify-between">
                                        <span class="text-lg font-semibold text-gray-900">Total</span>
                                        <span class="text-lg font-semibold text-gray-900" id="totalAmount">$220.00</span>
                                    </div>
                                </div>

                                <!-- Order Actions -->
                                <div class="mt-6 space-y-3" id="editActions" style="display: none;">
                                    <button onclick="saveOrder()" class="w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium">
                                        Save Changes
                                    </button>
                                    <button onclick="cancelEdit()" class="w-full bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm font-medium">
                                        Cancel
                                    </button>
                                </div>

                                <!-- Order Status -->
                                <div class="mt-6 p-4 bg-green-50 rounded-lg">
                                    <div class="flex items-center">
                                        <svg class="h-5 w-5 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                                        </svg>
                                        <span class="ml-2 text-sm font-medium text-green-800">Order Completed</span>
                                    </div>
                                    <p class="mt-1 text-sm text-green-700">This order has been successfully processed and delivered.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        let isEditMode = false;
        let itemCounter = 2;

        // Mobile menu functionality
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('mobileMenuOverlay');
        const openSidebarBtn = document.getElementById('openSidebar');
        const closeSidebarBtn = document.getElementById('closeSidebar');

        function openSidebar() {
            sidebar.classList.remove('-translate-x-full');
            overlay.classList.remove('hidden');
        }

        function closeSidebar() {
            sidebar.classList.add('-translate-x-full');
            overlay.classList.add('hidden');
        }

        openSidebarBtn.addEventListener('click', openSidebar);
        closeSidebarBtn.addEventListener('click', closeSidebar);
        overlay.addEventListener('click', closeSidebar);

        function goBack() {
            window.history.back();
        }

        function toggleEditMode() {
            isEditMode = !isEditMode;
            const editButton = document.getElementById('editButton');
            const editActions = document.getElementById('editActions');
            const addItemButton = document.getElementById('addItemButton');
            
            if (isEditMode) {
                editButton.textContent = 'Cancel Edit';
                editButton.className = 'bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm font-medium';
                editActions.style.display = 'block';
                addItemButton.classList.remove('hidden');
                
                // Enable all form fields
                enableFormFields();
                
                // Show remove buttons and tag inputs
                document.querySelectorAll('.remove-item-btn').forEach(btn => btn.classList.remove('hidden'));
                document.querySelectorAll('.remove-tag-btn').forEach(btn => btn.classList.remove('hidden'));
                document.querySelectorAll('.tag-input-container').forEach(container => container.classList.remove('hidden'));
            } else {
                editButton.textContent = 'Edit Order';
                editButton.className = 'bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium';
                editActions.style.display = 'none';
                addItemButton.classList.add('hidden');
                
                // Disable all form fields
                disableFormFields();
                
                // Hide remove buttons and tag inputs
                document.querySelectorAll('.remove-item-btn').forEach(btn => btn.classList.add('hidden'));
                document.querySelectorAll('.remove-tag-btn').forEach(btn => btn.classList.add('hidden'));
                document.querySelectorAll('.tag-input-container').forEach(container => container.classList.add('hidden'));
            }
        }

        function enableFormFields() {
            document.getElementById('orderStatus').disabled = false;
            document.getElementById('orderSeller').disabled = false;
            document.getElementById('orderCasilla').readOnly = false;
            document.getElementById('orderNotes').readOnly = false;
            document.getElementById('shippingCost').readOnly = false;
            document.getElementById('taxCost').readOnly = false;
            document.getElementById('otherFees').readOnly = false;
            
            document.querySelectorAll('.product-select').forEach(select => select.disabled = false);
            document.querySelectorAll('.client-select').forEach(select => select.disabled = false);
            document.querySelectorAll('.quantity-input').forEach(input => input.readOnly = false);
            document.querySelectorAll('.unit-cost-input').forEach(input => input.readOnly = false);
        }

        function disableFormFields() {
            document.getElementById('orderStatus').disabled = true;
            document.getElementById('orderSeller').disabled = true;
            document.getElementById('orderCasilla').readOnly = true;
            document.getElementById('orderNotes').readOnly = true;
            document.getElementById('shippingCost').readOnly = true;
            document.getElementById('taxCost').readOnly = true;
            document.getElementById('otherFees').readOnly = true;
            
            document.querySelectorAll('.product-select').forEach(select => select.disabled = true);
            document.querySelectorAll('.client-select').forEach(select => select.disabled = true);
            document.querySelectorAll('.quantity-input').forEach(input => input.readOnly = true);
            document.querySelectorAll('.unit-cost-input').forEach(input => input.readOnly = true);
        }

        function addOrderItem() {
            itemCounter++;
            const orderItems = document.getElementById('orderItems');
            
            const newItem = document.createElement('div');
            newItem.className = 'border border-gray-200 rounded-lg p-4 order-item';
            newItem.innerHTML = `
                <div class="flex justify-between items-start mb-3">
                    <h4 class="text-md font-medium text-gray-900">Item #${itemCounter}</h4>
                    <button onclick="removeOrderItem(this)" class="text-red-600 hover:text-red-800 remove-item-btn">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                    </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Product</label>
                        <select class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 product-select">
                            <option value="">Select Product</option>
                            <option value="t-shirt">Designer T-Shirt</option>
                            <option value="jeans">Premium Jeans</option>
                            <option value="sneakers">Running Sneakers</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Client</label>
                        <select class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 client-select">
                            <option value="">Select Client</option>
                            <option value="john-doe">John Doe</option>
                            <option value="jane-smith">Jane Smith</option>
                            <option value="bob-johnson">Bob Johnson</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Quantity</label>
                        <input type="number" value="1" min="1" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 quantity-input" onchange="updateItemTotal(this)">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Unit Cost</label>
                        <input type="number" value="0.00" step="0.01" min="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 unit-cost-input" onchange="updateItemTotal(this)">
                    </div>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Tags</label>
                    <div class="flex flex-wrap gap-2 mb-2 tags-container"></div>
                    <div class="flex space-x-2 tag-input-container">
                        <input type="text" placeholder="Enter tag" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 tag-input">
                        <button type="button" onclick="addTag(this)" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-md text-sm">Add</button>
                    </div>
                </div>

                <div class="flex justify-end">
                    <div class="text-right">
                        <div class="text-sm text-gray-500">Item Total</div>
                        <div class="text-lg font-semibold text-gray-900 item-total">$0.00</div>
                    </div>
                </div>
            `;
            
            orderItems.appendChild(newItem);
            updateOrderTotal();
        }

        function removeOrderItem(button) {
            if (confirm('Are you sure you want to remove this item?')) {
                button.closest('.order-item').remove();
                updateOrderTotal();
            }
        }

        function addTag(button) {
            const tagInput = button.previousElementSibling;
            const tagText = tagInput.value.trim();
            
            if (tagText) {
                const tagsContainer = button.closest('.order-item').querySelector('.tags-container');
                
                const tagColors = ['blue', 'green', 'purple', 'red', 'yellow', 'indigo', 'pink', 'gray'];
                const randomColor = tagColors[Math.floor(Math.random() * tagColors.length)];
                
                const tagElement = document.createElement('span');
                tagElement.className = `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-${randomColor}-100 text-${randomColor}-800 tag-item`;
                tagElement.innerHTML = `
                    ${tagText}
                    <button type="button" class="ml-1 h-4 w-4 text-${randomColor}-400 hover:text-${randomColor}-600 remove-tag-btn" onclick="removeTag(this)">
                        <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                    </button>
                `;
                
                tagsContainer.appendChild(tagElement);
                tagInput.value = '';
            }
        }

        function removeTag(button) {
            button.closest('.tag-item').remove();
        }

        function updateItemTotal(input) {
            const orderItem = input.closest('.order-item');
            const quantity = parseFloat(orderItem.querySelector('.quantity-input').value) || 0;
            const unitCost = parseFloat(orderItem.querySelector('.unit-cost-input').value) || 0;
            const total = quantity * unitCost;
            
            orderItem.querySelector('.item-total').textContent = `$${total.toFixed(2)}`;
            updateOrderTotal();
        }

        function updateOrderTotal() {
            let subtotal = 0;
            
            document.querySelectorAll('.order-item').forEach(item => {
                const quantity = parseFloat(item.querySelector('.quantity-input').value) || 0;
                const unitCost = parseFloat(item.querySelector('.unit-cost-input').value) || 0;
                subtotal += quantity * unitCost;
            });
            
            const shipping = parseFloat(document.getElementById('shippingCost').value) || 0;
            const tax = parseFloat(document.getElementById('taxCost').value) || 0;
            const otherFees = parseFloat(document.getElementById('otherFees').value) || 0;
            
            const total = subtotal + shipping + tax + otherFees;
            
            document.getElementById('subtotalAmount').textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById('totalAmount').textContent = `$${total.toFixed(2)}`;
        }

        function saveOrder() {
            // In a real application, this would make an API call to save the order
            alert('Order saved successfully!');
            toggleEditMode();
        }

        function cancelEdit() {
            if (confirm('Are you sure you want to cancel? All unsaved changes will be lost.')) {
                // Reload the page to reset all changes
                location.reload();
            }
        }

        function publishOrder() {
            if (confirm('Are you sure you want to publish this order? This action cannot be undone.')) {
                alert('Order published successfully!');
            }
        }

        // Initialize calculations on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateOrderTotal();
        });

        // Handle tag input on Enter key
        document.addEventListener('keypress', function(e) {
            if (e.target.classList.contains('tag-input') && e.key === 'Enter') {
                e.preventDefault();
                const addButton = e.target.nextElementSibling;
                addTag(addButton);
            }
        });
    </script>
</body>
</html>
